(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{101:function(t,e,n){},124:function(t,e,n){},125:function(t,e,n){},126:function(t,e,n){"use strict";n.r(e);var a=n(3),i=n(0),c=n.n(i),r=n(10),s=n.n(r);n(101),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=n(45),l=n(19),d=n(14),u=n(21),j=n(8),b=n(77),O=n.n(b).a.create(Object(j.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"3a123130-7eae-4888-b422-da332a4d5f0c"}})),f=function(){return O.get("todo-lists")},h=function(t){return O.post("todo-lists",{title:t})},p=function(t){return O.delete("todo-lists/".concat(t))},g=function(t,e){return O.put("todo-lists/".concat(t),{title:e})},m=function(t){return O.get("/todo-lists/".concat(t,"/tasks"))},T=function(t,e){return O.post("/todo-lists/".concat(t,"/tasks"),{title:e})},v=function(t,e){return O.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},x=function(t,e,n){return O.put("/todo-lists/".concat(t,"/tasks/").concat(e),{title:n})},S=function(t){return O.post("/auth/login",t)},I=function(){return O.get("/auth/me")},k=function(){return O.delete("/auth/login")},y=function(t,e){e.messages[0].length?t(D(e.messages[0])):t(D("Some error occurred")),t(w("failed"))},E=function(t,e){t(D(e.messages?e.messages:"failed loading")),t(w("failed"))},A={isLoggedIn:!1},L=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},C={status:"loading",error:"",initializeApp:!1},w=function(t){return{type:"APP/REQUEST-STATUS",status:t}},D=function(t){return{type:"APP/SET-ERROR",error:t}},N=function(t){return{type:"APP/INITIALIZE-APP",initializeApp:t}},P=[],R=function(t,e){return{type:"ENTITY-STATUS",todolistId:e,entityStatus:t}},z={},F=n(40),G=n(78),H=Object(F.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":var n=Object(j.a)({},t),a=n[e.todolistId];return n[e.todolistId]=a.filter((function(t){return t.id!==e.taskId})),n;case"ADD-TASK":var i=Object(j.a)({},t),c=i[e.todolistId],r={id:e.taskId,title:e.titleTask,isDone:!1};return i[e.todolistId]=[r].concat(Object(u.a)(c)),i;case"TASK-STATUS":var s=Object(j.a)({},t),o=s[e.todolistId],l=o.find((function(t){return t.id===e.taskId}));return l&&(l.isDone=e.taskStatus),s[e.todolistId]=Object(u.a)(o),s;case"CHANGE-TITLE":var b=Object(j.a)({},t),O=b[e.todolistId],f=O.find((function(t){return t.id===e.taskId}));return f&&(f.title=e.taskTitle,b[e.todolistId]=Object(u.a)(O)),b;case"ADD-TODOLIST":var h=Object(j.a)({},t);return Object(j.a)(Object(j.a)({},h),{},Object(d.a)({},e.todoList.id,[]));case"REMOVE-TODOLIST":var p=Object(j.a)({},t);return delete p[e.id],Object(j.a)({},p);case"SET-TODO-LISTS":var g=Object(j.a)({},t);return e.todoLists.forEach((function(t){g[t.id]=[]})),g;case"SET-TASK":var m=Object(j.a)({},t);return m[e.todoListId]=e.task,m;default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":for(var n=t.filter((function(t){return t.id!==e.id})),a=0;a<t.length;a++)t[a].id===e.id&&delete t[a];return Object(u.a)(n);case"CHANGE-TODOLIST-TITLE":var i=t.find((function(t){return t.id===e.id}));return i&&(i.title=e.title),Object(u.a)(t);case"CHANGE-TODOLIST-FILTER":return t.find((function(t){t.id===e.id&&(t.filter=e.filter)})),Object(u.a)(t);case"ADD-TODOLIST":var c=Object(j.a)(Object(j.a)({},e.todoList),{},{filter:"all",entityStatus:"idle"});return[c].concat(Object(u.a)(t));case"SET-TODO-LISTS":return e.todoLists.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"ENTITY-STATUS":return t.find((function(t){t.id===e.todolistId&&(t.entityStatus=e.entityStatus)})),Object(u.a)(t);default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/REQUEST-STATUS":return Object(j.a)(Object(j.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(j.a)(Object(j.a)({},t),{},{error:e.error});case"APP/INITIALIZE-APP":return Object(j.a)(Object(j.a)({},t),{},{initializeApp:e.initializeApp});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(j.a)(Object(j.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),K=Object(F.d)(H,Object(F.a)(G.a));window.store=K;var U=n(179),M=n(176);function V(t){return Object(a.jsx)(M.a,Object(j.a)({elevation:6,variant:"filled"},t))}function B(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(D(null))};return Object(a.jsx)(U.a,{open:!!e,autoHideDuration:6e3,onClose:n,children:Object(a.jsx)(V,{onClose:n,severity:"error",children:e})})}var Z=n(168),q=n(172),_=n(173),Y=n(128),J=n(129),Q=n(174),W=n(15),$=n(127),X=n(180),tt=n(164),et=n(165),nt=n(175),at=n(166),it=n(177),ct=n(83),rt=function(t){var e=Object(l.b)(),n=Object(ct.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<2&&(e.password="Invalid password address"):e.password="Required",e},onSubmit:function(t){var a;e((a=t,function(t){t(w("loading")),S(a).then((function(e){e.data.resultCode?(y(t,e.data),t(w("failed"))):(t(L(!0)),t(w("succeeded")))})).catch((function(e){E(t,e)}))})),n.resetForm()}});return t.isLoggedIn?Object(a.jsx)(W.a,{to:"/"}):Object(a.jsx)("div",{className:"login-container",children:Object(a.jsx)($.a,{children:Object(a.jsx)("form",{onSubmit:n.handleSubmit,children:Object(a.jsx)(X.a,{children:Object(a.jsxs)($.a,{style:{padding:"30px",width:"350px"},children:[Object(a.jsx)("h2",{style:{textAlign:"center"},children:"Login"}),Object(a.jsxs)(tt.a,{children:[Object(a.jsx)("p",{children:"Test login"}),Object(a.jsx)("p",{children:"Email: mailfortest118@gmail.com"}),Object(a.jsx)("p",{children:"Password: testpassword"})]}),Object(a.jsxs)(et.a,{children:[Object(a.jsx)(nt.a,Object(j.a)({label:"Email",id:"email",margin:"normal"},n.getFieldProps("email"))),Object(a.jsx)("div",{style:{height:"30px",color:"Required"===n.errors.email?"black":"red"},children:n.touched.email&&n.errors.email?Object(a.jsx)("div",{children:n.errors.email}):null}),Object(a.jsx)(nt.a,Object(j.a)({id:"password",type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),Object(a.jsx)("div",{style:{height:"30px",color:"Required"===n.errors.password?"black":"red"},children:n.touched.password&&n.errors.password?Object(a.jsx)("div",{children:n.errors.password}):null}),Object(a.jsx)(at.a,{label:"Remember me",control:Object(a.jsx)(it.a,{onChange:n.handleChange,checked:n.values.rememberMe,name:"rememberMe"})}),Object(a.jsx)(J.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})})},st=(n(124),n(125),n(22)),ot=n(163),lt=n(167),dt=c.a.memo((function(t){var e=Object(i.useState)(""),n=Object(st.a)(e,2),c=n[0],r=n[1],s=Object(i.useState)(""),o=Object(st.a)(s,2),l=o[0],d=o[1],u=function(){c.trim()?t.addItem(c.trim()):d("error"),r("")};return Object(a.jsxs)("div",{children:[Object(a.jsx)(nt.a,{size:"small",variant:"outlined",error:!!l,value:c,onChange:function(t){r(t.currentTarget.value),d("")},onKeyPress:function(t){""!==l&&d(""),"Enter"===t.key&&u()},label:"Title",helperText:l,disabled:t.entityStatus}),Object(a.jsxs)(ot.a,{onClick:u,disabled:t.entityStatus,children:[" ",Object(a.jsx)(lt.a,{})," "]})]})}));function ut(t){var e=Object(i.useState)(),n=Object(st.a)(e,2),c=n[0],r=n[1],s=Object(i.useState)(""),o=Object(st.a)(s,2),l=o[0],d=o[1],u=Object(i.useState)(!1),j=Object(st.a)(u,2),b=j[0],O=j[1],f=function(){r(!1),t.onChange(l)};return c?Object(a.jsx)(nt.a,{size:"small",autoFocus:!0,onKeyDown:function(t){"Enter"===t.key&&f()},onChange:function(t){t.currentTarget.value.length<100?(d(t.currentTarget.value),O(!1)):O(!0)},onBlur:f,value:l,color:b?"secondary":"primary"}):Object(a.jsx)("span",{onDoubleClick:function(){d(t.title),r(!0)},className:"title",children:t.title})}var jt=n(170),bt=n(169),Ot=c.a.memo((function(t){var e=Object(i.useCallback)((function(e){t.addTask(e,t.id)}),[]),n=t.tasks;"active"===t.filter&&(n=t.tasks.filter((function(t){return!t.isDone}))),"completed"===t.filter&&(n=t.tasks.filter((function(t){return t.isDone})));var c=Object(l.b)();return Object(i.useEffect)((function(){var e,n=(e=t.id,function(t){t(R("loading",e)),m(e).then((function(n){var a=n.data.items;t({type:"SET-TASK",task:a,todoListId:e}),t(R("idle",e))})).catch((function(e){E(t,e)}))});c(n)}),[]),Object(a.jsxs)($.a,{elevation:5,className:"paper-todolist",children:["loading"===t.entityStatus&&Object(a.jsx)("div",{className:"todolist-at-event",children:Object(a.jsx)(Z.a,{size:70,style:{position:"absolute",top:"35%",left:"35%"}})}),Object(a.jsxs)("div",{className:"header_todolist",children:[Object(a.jsx)(ut,{title:t.title,onChange:function(e){return t.changeHandlerTitle(e,t.id)}}),Object(a.jsx)("button",{className:"buttonDelete",onClick:function(){return t.deleteTodoList(t.id)},disabled:"loading"===t.entityStatus,children:"\u2716"}),Object(a.jsx)(dt,{addItem:e,entityStatus:"loading"===t.entityStatus})]}),Object(a.jsx)("ul",{className:"wrapperTasks",children:n.map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(it.a,{checked:e.isDone,onChange:function(n){t.changeTaskStatus(e.id,n.currentTarget.checked,t.id)},color:"primary",size:"small"}),Object(a.jsx)("span",{className:e.isDone?"task_is_done":"",children:Object(a.jsx)(ut,{title:e.title,onChange:function(n){return t.changeHandlerTaskTitle(n,t.id,e.id)}})}),Object(a.jsxs)(ot.a,{onClick:function(){return t.removeTask(e.id,t.id)},size:"small",disabled:"loading"===t.entityStatus,children:[" ",Object(a.jsx)(bt.a,{})]})]},e.id)}))}),Object(a.jsx)("div",{className:"wrapper-button-group",children:Object(a.jsx)("div",{className:"button-group",children:Object(a.jsxs)(jt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group",size:"small",children:[Object(a.jsx)(J.a,{color:"all"===t.filter?"primary":"inherit",onClick:function(){return t.changeFilter("all",t.id)},children:"All"}),Object(a.jsx)(J.a,{color:"active"===t.filter?"primary":"inherit",onClick:function(){return t.changeFilter("active",t.id)},children:"Active"}),Object(a.jsx)(J.a,{color:"completed"===t.filter?"primary":"inherit",onClick:function(){return t.changeFilter("completed",t.id)},children:"Completed"})]})})})]})})),ft=n(171);var ht=function(){var t=Object(l.c)((function(t){return t.todoLists})),e=Object(l.c)((function(t){return t.tasks})),n=Object(l.c)((function(t){return t.auth.isLoggedIn})),c=Object(l.b)();Object(i.useEffect)((function(){n&&c((function(t){t(w("loading")),f().then((function(e){t({type:"SET-TODO-LISTS",todoLists:e.data}),t(w("succeeded"))})).catch((function(e){E(t,e)}))}))}),[]);var r=Object(i.useCallback)((function(t,e){var n,a,i=(n=e,a=t,function(t){t(R("loading",n)),v(n,a).then((function(e){if(e.data.messages[0])y(t,e.data);else{var i=function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(a,n);t(i),t(R("idle",n))}})).catch((function(e){E(t,e)}))});c(i)}),[]),s=Object(i.useCallback)((function(t,e){var n=function(t,e){return function(n){n(R("loading",t)),T(t,e).then((function(a){if(!a.data.messages[0]){var i=function(t,e,n){return{type:"ADD-TASK",titleTask:t,todolistId:e,taskId:n}}(e,t,a.data.data.item.id);return n(i),void n(R("idle",t))}y(n,a.data)})).catch((function(t){E(n,t)}))}}(e,t);c(n)}),[]),o=Object(i.useCallback)((function(t,e,n){var a={type:"TASK-STATUS",taskId:t,todolistId:n,taskStatus:e};c(a)}),[]),d=Object(i.useCallback)((function(t,e,n){var a,i,r,s=(a=e,i=n,r=t,function(t){t(R("loading",a)),x(a,i,r).then((function(e){if(console.log(e.data.messages+" update task"),e.data.messages[0])y(t,e.data);else{console.log("true");var n=function(t,e,n){return{type:"CHANGE-TITLE",taskId:t,taskTitle:n,todolistId:e}}(i,a,r);t(n),t(R("idle",a))}})).catch((function(e){E(t,e)}))});c(s)}),[]),u=Object(i.useCallback)((function(t,e){var n={type:"CHANGE-TODOLIST-FILTER",id:e,filter:t};c(n)}),[]),j=Object(i.useCallback)((function(t){var e,n=(e=t,function(t){t(R("loading",e)),p(e).then((function(n){n.data.messages[0]?y(t,n.data):(t(function(t){return{type:"REMOVE-TODOLIST",id:t}}(e)),t(R("idle",e)))})).catch((function(e){E(t,e)}))});c(n)}),[]),b=Object(i.useCallback)((function(t){var e=function(t){return function(e){e(w("loading")),h(t).then((function(t){t.data.messages[0]?y(e,t.data):(e({type:"ADD-TODOLIST",todoList:t.data.data.item}),e(w("succeeded")))})).catch((function(t){E(e,t)}))}}(t);c(e)}),[]),O=Object(i.useCallback)((function(t,e){var n,a,i=(n=e,a=t,function(t){t(R("loading",n)),g(n,a).then((function(e){e.data.messages[0]?y(t,e.data):(t(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(n,a)),t(R("idle",n)))})).catch((function(e){E(t,e)}))});c(i)}),[]);return n?Object(a.jsxs)("div",{style:{paddingLeft:"1%"},children:[Object(a.jsx)("h3",{children:"Add Todolist"}),Object(a.jsx)(dt,{addItem:b,entityStatus:!1}),Object(a.jsx)(ft.a,{container:!0,style:{padding:"20px"},children:t.map((function(t){var n=e[t.id];return Object(a.jsx)(ft.a,{item:!0,children:Object(a.jsx)(Ot,{changeHandlerTaskTitle:d,changeHandlerTitle:O,id:t.id,title:t.title,tasks:n,removeTask:r,changeFilter:u,addTask:s,changeTaskStatus:o,filter:t.filter,deleteTodoList:j,entityStatus:t.entityStatus},t.id)},t.id)}))})]}):Object(a.jsx)(W.a,{to:"/login"})},pt=function(){var t=Object(l.c)((function(t){return t.app.status})),e=Object(l.c)((function(t){return t.app.initializeApp})),n=Object(l.c)((function(t){return t.auth.isLoggedIn})),c=Object(l.b)();Object(i.useEffect)((function(){c((function(t){t(w("loading")),I().then((function(e){e.data.resultCode?t(w("failed")):(t(L(!0)),t(N(!0)),t(w("succeeded"))),t(N(!0))})).catch((function(e){E(t,e)}))}))}),[]);return e?Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(q.a,{position:"static",children:Object(a.jsxs)(_.a,{style:{display:"flex",justifyContent:"space-between",background:"#4B4453"},children:[Object(a.jsx)(Y.a,{variant:"h4",children:"Todolist"}),n?Object(a.jsx)(J.a,{color:"inherit",onClick:function(){c((function(t){t(w("loading")),k().then((function(e){e.data.resultCode?(y(t,e.data),t(w("failed"))):(t(L(!1)),t(w("succeeded")))})).catch((function(e){E(t,e)}))}))},children:"sign out"}):null]})}),Object(a.jsx)("div",{style:{height:"4px",width:"100%"},children:"loading"===t&&Object(a.jsx)(Q.a,{style:{color:"#B39CD0"}})}),Object(a.jsx)(B,{}),Object(a.jsxs)(W.d,{children:[Object(a.jsx)(W.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(ht,{})}}),Object(a.jsx)(W.b,{exact:!0,path:"/login",render:function(){return Object(a.jsx)(rt,{isLoggedIn:n})}}),Object(a.jsx)(W.b,{path:"/404",render:function(){return Object(a.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(a.jsx)(W.a,{from:"*",to:"/404"})]})]}):Object(a.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",alignItems:"center",display:"flex",justifyContent:"center"},children:Object(a.jsx)(Z.a,{size:120})})};s.a.render(Object(a.jsx)(l.a,{store:K,children:Object(a.jsx)(o.a,{children:Object(a.jsx)(pt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[126,1,2]]]);
//# sourceMappingURL=main.c2a59839.chunk.js.map